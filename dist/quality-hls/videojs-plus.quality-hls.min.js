!function(t){"use strict";function e(){return e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var l=arguments[e];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n])}return t},e.apply(this,arguments)}function l(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var n="default"in t?t.default:t,i=t.getComponent("SettingOptionalItem"),a=function(t){function i(e,l){var n;return n=t.call(this,e,Object.assign(l,{name:"QualityHlsSettingItem",label:"Quality",icon:"vjs-icon-hd",entries:l.quality||[]}))||this,n.addClass("vjs-setting-quality"),n.levels=[],n.handleAllLevelsAdded(),n}l(i,t);var a=i.prototype;return a.handleAllLevelsAdded=function(){var t=this,e=this.player_;if(!e.qualityLevels)return n.log.warn("plugin videojs-contrib-quality-levels do not exsits"),!1;var l,i=e.qualityLevels(),a=[];i.on("addqualitylevel",function(n){var i=n.qualityLevel;clearTimeout(l),a.push(i);var o=function(){t.levels=a.slice(0),e.trigger("before-quality-setup",{levels:t.levels}),t.onAllLevelsAdded(),a=[]};l=setTimeout(o,10)})},a.onAllLevelsAdded=function(){var t=this,e=this.levels.map(function(e){var l=e.height;return{label:t.localize(l+"p"),value:l,defalut:!1}}).sort(function(t,e){return e.value-t.value}).concat({label:"Auto",value:"auto",defalut:!0});this.setEntries(e),this.show(),this.player_.trigger("quality")},a.update=function(l){t.prototype.update.call(this,l);var n=l.value;this.levels.forEach(function(t){t.enabled=t.height===n||"auto"===n}),this.player_.trigger("qualitychange",this.entries.reduce(function(t,l,i){return l.value===n?e({index:i},l):t},{}))},i}(i);t.getComponent("SettingMenuButton").prototype.options_.entries.push("QualityHlsSettingItem"),t.registerComponent("QualityHlsSettingItem",a)}(videojs);
