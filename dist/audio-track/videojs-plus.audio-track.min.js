!function(t){"use strict";function e(){return e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},e.apply(this,arguments)}function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var a=t.getComponent("SettingOptionItem"),r=function(t){function a(n,a){var r;r=t.call(this,n,e({},a,{name:"AudioTrackSettingItem",label:"Audio",icon:"vjs-icon-audiotrack"}))||this,r.addClass("vjs-setting-audio");var o,u=function(t){"hls-audio-change"===t.name?(clearTimeout(o),o=setTimeout(r.handleAudioChangeEvent.bind(i(i(r))),10)):"hls-alternate-audio"===t.name&&r.onAlternateAudio()};return n.tech_.on("usage",u),n.on("dispose",function(){n.tech_.off("usage",u)}),n.on("loadstart",function(){r.hide()}),r}n(a,t);var r=a.prototype;return r.update=function(e){t.prototype.update.call(this,e),this.player_.audio().pick(e.value)},r.onAlternateAudio=function(){var t=this.player_.audio().values(),e=t.map(function(t,e){var n=t.id,i=t.kind;return{label:t.label,value:e,id:n,kind:i,language:t.language,index:e,track:t}});this.player_.trigger("before-audio-setup",e),this.setEntries(e),this.show(),this.player_.trigger("audio",e)},r.handleAudioChangeEvent=function(){var t=this,e=this.player_.audio().values(),n=e.reduce(function(e,n,i){return n.enabled&&(e=t.entries[i]),e},{});this.player_.trigger("audiochange",n)},a}(a);t.getComponent("SettingMenuButton").prototype.options_.entries.push("AudioTrackSettingItem"),t.registerComponent("AudioTrackSettingItem",r);var o=function(t){function e(e,n){var i;return void 0===n&&(n={}),i=t.call(this,e,n)||this,i.track=i.values().find(function(t){return t.enabled}),e.on("audiochange",function(t,e){var n=e.index;i.track=i.values()[n]}),i}n(e,t);var i=e.prototype;return i.values=function(){for(var t=this.player.audioTracks(),e=[],n=0;n<t.length;n++)e.push(t[n]);return e},i.pick=function(t){var e=this.values(),n=e[t];n&&(this.track.enabled=!1,this.track=n,n.enabled=!0)},e}(t.getPlugin("plugin"));t.registerPlugin("audio",o)}(videojs);
