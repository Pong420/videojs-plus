!function(e){"use strict";function t(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var i=e.getComponent("SettingOptionItem"),a=function(e){function i(t,i){var a;a=e.call(this,t,Object.assign(i,{name:"AudioSettingMenuItem",label:"Audio",icon:"vjs-icon-audiotrack",entries:i.quality||[]}))||this,a.addClass("vjs-setting-audio");var o,r=function(e){"hls-audio-change"===e.name?(clearTimeout(o),o=setTimeout(a.handleAudioChangeEvent.bind(n(n(a))),10)):"hls-alternate-audio"===e.name&&a.onAlternateAudio()};return t.tech().on("usage",r),t.on("dispose",function(){t.tech().off("usage",r)}),t.on("loadstart",function(){a.hide()}),a}t(i,e);var a=i.prototype;return a.update=function(t){e.prototype.update.call(this,t),this.player_.audio().pick(t.value.index)},a.onAlternateAudio=function(){var e=this.player_.audio().values(),t=e.map(function(e,t){return{id:e.id,kind:e.kind,label:e.label,language:e.language,index:t,track:e}});this.player_.trigger("before-audio-setup",t),this.setEntries(t),this.show(),this.player_.trigger("audio",t)},a.handleAudioChangeEvent=function(){var e=this,t=this.player_.audio().values(),n=t.reduce(function(t,n,i){return n.enabled&&(t=e.entries[i]),t},{});this.player_.trigger("audiochange",n)},i}(i);e.getComponent("SettingMenuButton").prototype.options_.entries.push("AudioSettingMenuItem"),e.registerComponent("AudioSettingMenuItem",a);var o=function(e){function n(t,n){var i;return void 0===n&&(n={}),i=e.call(this,t,n)||this,i.track=i.values().find(function(e){return e.enabled}),t.on("audiochange",function(e,t){var n=t.index;i.track=i.values()[n]}),i}t(n,e);var i=n.prototype;return i.values=function(){for(var e=this.player.audioTracks(),t=[],n=0;n<e.length;n++)t.push(e[n]);return t},i.pick=function(e){var t=this.values(),n=t[e];n&&(this.track.enabled=!1,this.track=n,n.enabled=!0)},n}(e.getPlugin("plugin"));e.registerPlugin("audio",o)}(videojs);
