!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],e):e(t.videojs)}(this,function(t){"use strict";function e(t,n,i){var o=[];if(t&&t.childIndex_&&Object.keys(t.childIndex_).length)for(var r in t.childIndex_){var s=t.childIndex_[r];if(s&&s.name_==n){var a;i.push((a={parent:t,component:s,index:t.children_.indexOf(s)},a[n]=s,a))}o.push(e(s,n,i))}return{name:n,parent:t,children:o}}function n(){return n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},n.apply(this,arguments)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(t){var e;return t=t.map(function(t,i){var o=void 0!==t.defalut&&t.defalut,r=n({},t,{label:void 0!==t.label?t.label:t,value:void 0!==t.value?t.value:t,defalut:o,index:i});return o&&(e=r),r}),e||(e=t[0]),{entries:t,currentValue:e}}t.getComponent("Component").prototype.findChild=function(t){var n=[];return e(this,t,n),n};var s=t.browser.IS_IPHONE,a=t.browser.IOS_VERSION,l=t.browser.TOUCH_ENABLED;t.hook("setup",function(t){t.playsinline(!1!==t.options_.playsinline),t.addClass("video-js"),s&&(t.addClass("vjs-is-iphone"),a<11&&t.addClass("vjs-iphone-below-11")),l&&t.removeClass("vjs-workinghover")});var u=t.getComponent("Component"),c=t.getComponent("ControlBar"),p=function(t){function e(e,n){var i;return i=t.call(this,e,n)||this,i.addClass("vjs-control-separator"),i.addClass(n.className||""),i}return i(e,t),e}(u);t.registerComponent("ControlSeparator",p),t.hook("beforesetup",function(t,e){var n=c.prototype.options_.children.slice(0),i=n.indexOf("CustomControlSpacer");return i>-1&&(c.prototype.options_.children=[{name:"ControlSeparator",className:"top",children:[]},{name:"ControlSeparator",className:"middle",children:n.splice(0,i+1)},{name:"ControlSeparator",className:"bottom",children:n}]),e}),t.hook("setup",function(t){var e=!1!==t.options_.mobileView;(function(t){return window.matchMedia?window.matchMedia("(max-width: "+t+"px)").matches:window.innerWidth<=t})(480)&&e&&(t.controlBar.hide(),t.one("playing",function(){var e=["mouseover","userinactive","touchstart"];t.one(e,function n(){t.off(e,n),t.controlBar.show()}),t.one("touchend",function(){t.userActive(!0)})}),t.addClass("vjs-mobile-view"))});var h=t.getComponent("SeekBar");h.prototype.getPercent=function(){var t=this.player_.currentTime(),e=t/this.player_.duration();return e>=1?1:e},h.prototype.handleMouseMove=function(e){var n=this.player_;if(t.dom.isSingleLeftClick(e)){var i=this.calculateDistance(e)*n.duration();i===n.duration()&&(i-=.1),n.currentTime(i),this.update()}},t.getComponent("ControlBar").prototype.options_.children=["PlayToggle","CustomControlSpacer","VolumePanel","CurrentTimeDisplay","TimeDivider","DurationDisplay","ProgressControl","CustomControlSpacer","SettingMenuButton","FullscreenToggle"],t.hook("setup",function(t){t.on("mouseleave",function(){t.userActive(!1)}),t.ready(function(){t.controls(!1!==t.options_.controls)})});var d=function(e){function n(t,n){var i;return i=e.call(this,t,n)||this,i.title_=n.playerOptions.title||"",i.update(i.title_),i}i(n,e);var o=n.prototype;return o.createEl=function(){var n=e.prototype.createEl.call(this,"div",{className:"vjs-title"});return this.contentEl_=t.dom.createEl("div",{className:"vjs-title-field"}),n.appendChild(this.contentEl_),n},o.update=function(t){t?this.show():this.hide(),this.player_.cache_.title=this.title_,this.title_=t,this.contentEl_.innerHTML=t},n}(t.getComponent("Component")),v=function(t){var e=this.player_.getChild("VideoTitle");if(void 0===t)return e.title_;e.update(t)};t.registerPlugin("title",v),t.registerComponent("VideoTitle",d),t.getComponent("Player").prototype.options_.children.splice(2,0,"VideoTitle");var m=t.getComponent("PlayToggle"),f=t.getComponent("ClickableComponent"),C=function(e){function n(t,n){return e.call(this,t,n)||this}i(n,e);var o=n.prototype;return o.createEl=function(){return t.dom.createEl("div",{className:"vjs-play-toggle-layer"})},o.handleClick=function(t){(this.player_.userActive()||this.player_.paused())&&m.prototype.handleClick.call(this,t)},n}(f);t.registerComponent("PlayToggleLayer",C);var g=t.getComponent("Player").prototype.options_.children,y=g.indexOf("loadingSpinner");g.splice(y,0,"PlayToggleLayer");var b=t.getComponent("MenuItem"),_=function(t){function e(e,i){var o;return o=t.call(this,e,n({},i,{selectable:!0}))||this,o.addClass("vjs-context-menu-item"),o.controlText(i.label),o}i(e,t);var o=e.prototype;return o.createEl=function(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var r=(e=t.prototype.createEl).call.apply(e,[this].concat(i));return r.insertAdjacentHTML("afterbegin",'<span aria-hidden="true" class="vjs-icon-placeholder '+(this.options_.icon||"")+'"></span>'),r},o.handleClick=function(){this.player_.findChild("ContextMenu")[0].component.hide()},e}(b);t.registerComponent("ContextMenuItem",_);var j=function(t){function e(e){var n;return n=t.call(this,e,{name:"ContextMenuToggleLoop",label:"Loop",icon:"vjs-icon-loop"})||this,n.addClass("vjs-checkbox"),e.on("loadstart",n.update.bind(o(o(n)))),n}i(e,t);var n=e.prototype;return n.update=function(){this.selected(this.player_.loop())},n.handleClick=function(){t.prototype.handleClick.call(this),this.player_.loop(!this.player_.loop()),this.update()},e}(_);t.registerComponent("ContextMenuToggleLoop",j);var w=function(t){function e(e){return t.call(this,e,{name:"AboutThisPlayer",label:"About This Player",icon:"vjs-icon-github"})||this}return i(e,t),e.prototype.handleClick=function(){t.prototype.handleClick.call(this),window.open("https://github.com/Pong420/videojs-plus","_blank")},e}(_);t.registerComponent("AboutThisPlayer",w);var S=t.getComponent("ClickableComponent"),E=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-close-menu-layer vjs-close-context-menu"},n.handleClick=function(){this.options_.menu.hide()},e}(S);t.registerComponent("CloseContextMenu",E);var M=t.getComponent("Menu"),k=function(t){function e(e,n){var i;i=t.call(this,e,n)||this,i.addClass("vjs-context-menu"),i.hide(),i.player_.on("contextmenu",i.onContextmenu.bind(o(o(i))));var r=i.handleClick.bind(o(o(i)));return window.addEventListener("click",r),i.on("dispose",function(){window.removeEventListener("click",r)}),i}i(e,t);var n=e.prototype;return n.createEl=function(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var r=(e=t.prototype.createEl).call.apply(e,[this].concat(i)),s=new E(this.player_,{menu:this});return r.insertBefore(s.el_,r.firstElementChild),r},n.show=function(e,n){t.prototype.show.call(this),this.el_.style.top=n+"px",this.el_.style.left=e+"px"},n.onContextmenu=function(t){t.preventDefault();var e=this.player_.el().getBoundingClientRect(),n=t.pageX-e.x,i=t.pageY-e.y;this.show(n,i)},n.handleClick=function(t){(t.button||0===t.button)&&2!==t.button&&this.hide()},e}(M);k.prototype.options_={children:["ContextMenuToggleLoop","AboutThisPlayer"]},t.registerComponent("ContextMenu",k),t.getComponent("Player").prototype.options_.children.push("ContextMenu");var x=t.getComponent("ClickableComponent"),T=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-close-menu-layer vjs-close-setting-menu"},n.handleClick=function(){this.options_.menu.menuButton_.hideMenu()},e}(x);t.registerComponent("CloseSettingMenu",T);var O=t.getComponent("Menu"),I=function(t){function e(e,i){var r;return r=t.call(this,e,n({},i,{name:"SettingMenu"}))||this,r.addClass("vjs-setting-menu"),setTimeout(r.reset.bind(o(o(r))),0),r}i(e,t);var r=e.prototype;return r.reset=function(){if(this.contentEl_){this.removeStyle();var t=this.contentEl_,e=t.offsetWidth,n=t.offsetHeight;this.origin={children:this.children().slice(0),width:e,height:n},this.resize({width:e,height:n}),this.addClass("vjs-setting-menu-ready")}},r.createEl=function(){var e=t.prototype.createEl.call(this),n=new T(this.player_,{menu:this});return e.insertBefore(n.el_,e.firstElementChild),e},r.update=function(t){var e=this;void 0===t&&(t=[]),this.children().slice(0).forEach(function(t){e.removeChild(t)}),t.forEach(function(t){e.addChild(t)})},r.resize=function(t){var e=t.width,n=t.height;this.contentEl_.style.width=e+"px",this.contentEl_.style.height=n+"px"},r.restore=function(){this.resize(this.origin),this.update(this.origin.children)},r.removeStyle=function(){this.contentEl_.removeAttribute("style")},e}(O);t.registerComponent("SettingMenu",I);var P=t.getComponent("MenuItem"),B=function(e){function n(n,i){var o;return o=e.call(this,n,t.mergeOptions({selectable:!1},i))||this,o.menu=i.menu,o}return i(n,e),n}(P);t.registerComponent("SettingMenuItem",B);var L=function(e){function n(){return e.apply(this,arguments)||this}i(n,e);var o=n.prototype;return o.createEl=function(){var e=this.options_;return t.dom.createEl("li",{className:"vjs-menu-item vjs-setting-onoff-item",innerHTML:'\n        <div class="vjs-icon-placeholder '+(this.options_.icon||"")+'"></div>\n        <div>'+this.localize(e.label)+'</div>\n        <div class="vjs-spacer"></div>\n        <div>\n          <div class="vjs-onoff-button"></div>\n        </div>\n      '})},o.update=function(t){this.active=void 0===t?!this.active:t,this.active?this.addClass("vjs-active"):this.removeClass("vjs-active")},o.handleClick=function(){this.update()},o.selected=function(){},n}(B);t.registerComponent("SettingOnOffItem",L);var V=function(t){function e(e,n){var i;return i=t.call(this,e,n)||this,i.addChild("Component",{},0),i.addClass("vjs-settings-sub-menu-item"),i.addClass("vjs-settings-sub-menu-title"),i}return i(e,t),e.prototype.handleClick=function(){this.options_.menu.restore()},e}(B);t.registerComponent("SettingSubOptionTitle",V);var N=function(t){function e(e,n){var i;return i=t.call(this,e,n)||this,i.selectable=!0,Object.assign(o(o(i)),n),i.addChild("Component",{},0),i.addClass("vjs-settings-sub-menu-item"),i.addClass("vjs-settings-sub-menu-option"),i.update(),i}i(e,t);var n=e.prototype;return n.update=function(){this.selected(this.value===this.parent.currentValue.value)},n.handleClick=function(){this.parent.update(this)},e}(B);t.registerComponent("SettingSubOptionItem",N);var A=t.getComponent("SettingMenu"),z=function(t){function e(e){return t.call(this,e,{name:"SettingMenuTemp"})||this}return i(e,t),e}(A),H=function(t,e){var n=new z(t);n.update(e),t.addChild(n);var i=n.contentEl_.getBoundingClientRect();return n.update(),n.dispose(),t.removeChild(n),i},R=function(e){function n(t,n){var i;return void 0===n&&(n={}),i=e.call(this,t,Object.assign(n,r(n.entries)))||this,i.setEntries(i.options_.entries),i.entries.length||i.hide(),i}i(n,e);var o=n.prototype;return o.createEl=function(){var e=this.options_,n=e.icon,i=e.label,o=e.currentValue,r=t.dom.createEl("li",{className:"vjs-menu-item vjs-setting-menu-item",innerHTML:'\n        <div class="vjs-icon-placeholder '+(n||"")+'"></div>\n        <div class="vjs-setting-menu-label">'+this.localize(i)+'</div>\n        <div class="vjs-spacer"></div>\n      '});return this.currentValueEl=t.dom.createEl("div",{className:"vjs-setting-menu-value",innerHTML:this.localize(o?o.label:"")}),r.appendChild(this.currentValueEl),r},o.setEntries=function(t){var e=this,n=r(t),i=n.entries,o=n.currentValue;this.entries=i,this.currentValue=o,o&&(this.currentValueEl.innerHTML=this.localize(o.label)),this.subMenuItems=this.entries.map(function(t){var n=t.label,i=t.value;return new N(e.player_,{label:n,value:i,parent:e,menu:e.menu})}),this.subMenuItems.splice(0,0,new V(this.player_,{label:this.options_.label,menu:this.menu}))},o.handleClick=function(){var t=H(this.player_,this.subMenuItems);this.menu.update(this.subMenuItems),this.menu.resize(t)},o.update=function(t){var e=t.label,n=t.value;this.currentValue={label:e,value:n},this.currentValueEl.innerHTML=this.localize(e),this.subMenuItems.forEach(function(t){t.update&&t.update()}),this.menu.restore()},o.show=function(){e.prototype.show.call(this),this.menu.reset()},n}(B);t.registerComponent("SettingOptionItem",R);var D=function(t){function e(e,n){var i;return i=t.call(this,e,Object.assign(n,{label:"Speed",icon:"vjs-icon-slow-motion-video",entries:[.5,.75,{label:"Normal",value:1,defalut:!0},1.25,1.5,2]}))||this,i.addClass("vjs-setting-playback-rate"),e.on("ratechange",function(){var t=e.playbackRate(),n=i.entries.find(function(e){var n=e.value;return t===n});i.update(n)}),i}return i(e,t),e.prototype.update=function(e){t.prototype.update.call(this,e),this.player_.playbackRate()!==e.value&&this.player_.playbackRate(e.value)},e}(R);t.registerComponent("PlaybackRateSettingOptionalItem",D);var W=t.getComponent("MenuButton"),q=function(t){function e(e,n){var i;return i=t.call(this,e,n)||this,e.addChild(i.menu),i.removeChild(i.menu),e.on("playerresize",function(){i.menu.reset()}),i}i(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-setting-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-setting-button "+t.prototype.buildWrapperCSSClass.call(this)},n.createMenu=function(){var t=new I(this.player_,{menuButton:this});return(this.options_.entries||[]).forEach(function(e){t.addChild(e,{menu:t})}),t},n.hideMenu=function(){this.unpressButton(),this.el_.blur()},n.unpressButton=function(){t.prototype.unpressButton.call(this),this.player_.removeClass("vjs-keep-control-showing"),this.menu.restore()},n.handleClick=function(){var t=this;this.player_.addClass("vjs-keep-control-showing"),this.buttonPressed_?this.unpressButton():this.pressButton(),this.off(document.body,"click",this.hideMenu),this.off(document.body,"touchend",this.hideMenu),setTimeout(function(){t.one(document.body,"click",t.hideMenu)},0)},e}(W);q.prototype.controlText_="Settings",q.prototype.options_={entries:["PlaybackRateSettingOptionalItem"]},t.registerComponent("SettingMenuButton",q)});
