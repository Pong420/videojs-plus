"use strict";function findChild(e,t,n){var i=[];if(e&&e.childIndex_&&Object.keys(e.childIndex_).length)for(var o in e.childIndex_){var s=e.childIndex_[o];if(s&&s.name_==t){var r;n.push((r={parent:e,component:s,index:e.children_.indexOf(s)},r[t]=s,r))}i.push(findChild(s,t,n))}return{name:t,parent:e,children:i}}function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends.apply(this,arguments)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function parseEntries(e){var t;return e=e.map(function(e,n){var i=void 0!==e.defalut&&e.defalut,o=_extends({},e,{label:void 0!==e.label?e.label:e,value:void 0!==e.value?e.value:e,defalut:i,index:n});return i&&(t=o),o}),t||(t=e[0]),{entries:e,currentValue:t}}var video_js=require("video.js");video_js.getComponent("Component").prototype.findChild=function(e){var t=[];return findChild(this,e,t),t};var IS_IPHONE=video_js.browser.IS_IPHONE,IOS_VERSION=video_js.browser.IOS_VERSION,TOUCH_ENABLED=video_js.browser.TOUCH_ENABLED;video_js.hook("setup",function(e){e.playsinline(!1!==e.options_.playsinline),e.addClass("video-js"),IS_IPHONE&&(e.addClass("vjs-is-iphone"),IOS_VERSION<11&&e.addClass("vjs-iphone-below-11")),TOUCH_ENABLED&&e.removeClass("vjs-workinghover")});var Component=video_js.getComponent("Component"),ControlBar=video_js.getComponent("ControlBar"),ControlSeparator=function(e){function t(t,n){var i;return i=e.call(this,t,n)||this,i.addClass("vjs-control-separator"),i.addClass(n.className||""),i}return _inheritsLoose(t,e),t}(Component);video_js.registerComponent("ControlSeparator",ControlSeparator),video_js.hook("beforesetup",function(e,t){var n=ControlBar.prototype.options_.children.slice(0),i=n.indexOf("CustomControlSpacer");return i>-1&&(ControlBar.prototype.options_.children=[{name:"ControlSeparator",className:"top",children:[]},{name:"ControlSeparator",className:"middle",children:n.splice(0,i+1)},{name:"ControlSeparator",className:"bottom",children:n}]),t}),video_js.hook("setup",function(e){var t=!1!==e.options_.mobileView;(function(e){return window.matchMedia?window.matchMedia("(max-width: "+e+"px)").matches:window.innerWidth<=e})(480)&&t&&(e.controlBar.hide(),e.one("playing",function(){var t=["mouseover","userinactive","touchstart"];e.one(t,function n(){e.off(t,n),e.controlBar.show()}),e.one("touchend",function(){e.userActive(!0)})}),e.addClass("vjs-mobile-view"))});var SeekBar=video_js.getComponent("SeekBar");SeekBar.prototype.getPercent=function(){var e=this.player_.currentTime(),t=e/this.player_.duration();return t>=1?1:t},SeekBar.prototype.handleMouseMove=function(e){var t=this.player_;if(video_js.dom.isSingleLeftClick(e)){var n=this.calculateDistance(e)*t.duration();n===t.duration()&&(n-=.1),t.currentTime(n),this.update()}},video_js.getComponent("ControlBar").prototype.options_.children=["PlayToggle","CustomControlSpacer","VolumePanel","CurrentTimeDisplay","TimeDivider","DurationDisplay","ProgressControl","CustomControlSpacer","SettingMenuButton","FullscreenToggle"],video_js.hook("setup",function(e){e.on("mouseleave",function(){e.userActive(!1)}),e.ready(function(){e.controls(!1!==e.options_.controls)})});var Title=function(e){function t(t,n){var i;return i=e.call(this,t,n)||this,i.title_=n.playerOptions.title||"",i.update(i.title_),i}_inheritsLoose(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-title"});return this.contentEl_=video_js.dom.createEl("div",{className:"vjs-title-field"}),t.appendChild(this.contentEl_),t},n.update=function(e){e?this.show():this.hide(),this.player_.cache_.title=this.title_,this.title_=e,this.contentEl_.innerHTML=e},t}(video_js.getComponent("Component")),title=function(e){var t=this.player_.getChild("VideoTitle");if(void 0===e)return t.title_;t.update(e)};video_js.registerPlugin("title",title),video_js.registerComponent("VideoTitle",Title),video_js.getComponent("Player").prototype.options_.children.splice(2,0,"VideoTitle");var PlayToggleButton=video_js.getComponent("PlayToggle"),ClickableComponent=video_js.getComponent("ClickableComponent"),PlayToggleLayer=function(e){function t(t,n){return e.call(this,t,n)||this}_inheritsLoose(t,e);var n=t.prototype;return n.createEl=function(){return video_js.dom.createEl("div",{className:"vjs-play-toggle-layer"})},n.handleClick=function(e){(this.player_.userActive()||this.player_.paused())&&PlayToggleButton.prototype.handleClick.call(this,e)},t}(ClickableComponent);video_js.registerComponent("PlayToggleLayer",PlayToggleLayer);var playerChildren=video_js.getComponent("Player").prototype.options_.children,loadSpinnerIndex=playerChildren.indexOf("loadingSpinner");playerChildren.splice(loadSpinnerIndex,0,"PlayToggleLayer");var MenuItem=video_js.getComponent("MenuItem"),ContextMenuItem=function(e){function t(t,n){var i;return i=e.call(this,t,_extends({},n,{selectable:!0}))||this,i.addClass("vjs-context-menu-item"),i.controlText(n.label),i}_inheritsLoose(t,e);var n=t.prototype;return n.createEl=function(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var s=(t=e.prototype.createEl).call.apply(t,[this].concat(i));return s.insertAdjacentHTML("afterbegin",'<span aria-hidden="true" class="vjs-icon-placeholder '+(this.options_.icon||"")+'"></span>'),s},n.handleClick=function(){this.player_.findChild("ContextMenu")[0].component.hide()},t}(MenuItem);video_js.registerComponent("ContextMenuItem",ContextMenuItem);var ContextMenuToggleLoop=function(e){function t(t){var n;return n=e.call(this,t,{name:"ContextMenuToggleLoop",label:"Loop",icon:"vjs-icon-loop"})||this,n.addClass("vjs-checkbox"),t.on("loadstart",n.update.bind(_assertThisInitialized(_assertThisInitialized(n)))),n}_inheritsLoose(t,e);var n=t.prototype;return n.update=function(){this.selected(this.player_.loop())},n.handleClick=function(){e.prototype.handleClick.call(this),this.player_.loop(!this.player_.loop()),this.update()},t}(ContextMenuItem);video_js.registerComponent("ContextMenuToggleLoop",ContextMenuToggleLoop);var AboutThisPlayer=function(e){function t(t){return e.call(this,t,{name:"AboutThisPlayer",label:"About This Player",icon:"vjs-icon-github"})||this}return _inheritsLoose(t,e),t.prototype.handleClick=function(){e.prototype.handleClick.call(this),window.open("https://github.com/Pong420/videojs-plus","_blank")},t}(ContextMenuItem);video_js.registerComponent("AboutThisPlayer",AboutThisPlayer);var ClickableComponent$1=video_js.getComponent("ClickableComponent"),CloseContextMenu=function(e){function t(){return e.apply(this,arguments)||this}_inheritsLoose(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-close-menu-layer vjs-close-context-menu"},n.handleClick=function(){this.options_.menu.hide()},t}(ClickableComponent$1);video_js.registerComponent("CloseContextMenu",CloseContextMenu);var Menu=video_js.getComponent("Menu"),ContextMenu=function(e){function t(t,n){var i;i=e.call(this,t,n)||this,i.addClass("vjs-context-menu"),i.hide(),i.player_.on("contextmenu",i.onContextmenu.bind(_assertThisInitialized(_assertThisInitialized(i))));var o=i.handleClick.bind(_assertThisInitialized(_assertThisInitialized(i)));return window.addEventListener("click",o),i.on("dispose",function(){window.removeEventListener("click",o)}),i}_inheritsLoose(t,e);var n=t.prototype;return n.createEl=function(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var s=(t=e.prototype.createEl).call.apply(t,[this].concat(i)),r=new CloseContextMenu(this.player_,{menu:this});return s.insertBefore(r.el_,s.firstElementChild),s},n.show=function(t,n){e.prototype.show.call(this),this.el_.style.top=n+"px",this.el_.style.left=t+"px"},n.onContextmenu=function(e){e.preventDefault();var t=this.player_.el().getBoundingClientRect(),n=e.pageX-t.x,i=e.pageY-t.y;this.show(n,i)},n.handleClick=function(e){(e.button||0===e.button)&&2!==e.button&&this.hide()},t}(Menu);ContextMenu.prototype.options_={children:["ContextMenuToggleLoop","AboutThisPlayer"]},video_js.registerComponent("ContextMenu",ContextMenu),video_js.getComponent("Player").prototype.options_.children.push("ContextMenu");var ClickableComponent$2=video_js.getComponent("ClickableComponent"),CloseSettingMenu=function(e){function t(){return e.apply(this,arguments)||this}_inheritsLoose(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-close-menu-layer vjs-close-setting-menu"},n.handleClick=function(){this.options_.menu.menuButton_.hideMenu()},t}(ClickableComponent$2);video_js.registerComponent("CloseSettingMenu",CloseSettingMenu);var Menu$1=video_js.getComponent("Menu"),SettingMenu=function(e){function t(t,n){var i;return i=e.call(this,t,_extends({},n,{name:"SettingMenu"}))||this,i.addClass("vjs-setting-menu"),setTimeout(i.reset.bind(_assertThisInitialized(_assertThisInitialized(i))),0),i}_inheritsLoose(t,e);var n=t.prototype;return n.reset=function(){if(this.contentEl_){this.removeStyle();var e=this.contentEl_,t=e.offsetWidth,n=e.offsetHeight;this.origin={children:this.children().slice(0),width:t,height:n},this.resize({width:t,height:n}),this.addClass("vjs-setting-menu-ready")}},n.createEl=function(){var t=e.prototype.createEl.call(this),n=new CloseSettingMenu(this.player_,{menu:this});return t.insertBefore(n.el_,t.firstElementChild),t},n.update=function(e){var t=this;void 0===e&&(e=[]),this.children().slice(0).forEach(function(e){t.removeChild(e)}),e.forEach(function(e){t.addChild(e)})},n.resize=function(e){var t=e.width,n=e.height;this.contentEl_.style.width=t+"px",this.contentEl_.style.height=n+"px"},n.restore=function(){this.resize(this.origin),this.update(this.origin.children)},n.removeStyle=function(){this.contentEl_.removeAttribute("style")},t}(Menu$1);video_js.registerComponent("SettingMenu",SettingMenu);var MenuItem$1=video_js.getComponent("MenuItem"),SettingMenuItem=function(e){function t(t,n){var i;return i=e.call(this,t,video_js.mergeOptions({selectable:!1},n))||this,i.menu=n.menu,i}return _inheritsLoose(t,e),t}(MenuItem$1);video_js.registerComponent("SettingMenuItem",SettingMenuItem);var SettingOnOffItem=function(e){function t(){return e.apply(this,arguments)||this}_inheritsLoose(t,e);var n=t.prototype;return n.createEl=function(){var e=this.options_;return video_js.dom.createEl("li",{className:"vjs-menu-item vjs-setting-onoff-item",innerHTML:'\n        <div class="vjs-icon-placeholder '+(this.options_.icon||"")+'"></div>\n        <div>'+this.localize(e.label)+'</div>\n        <div class="vjs-spacer"></div>\n        <div>\n          <div class="vjs-onoff-button"></div>\n        </div>\n      '})},n.update=function(e){this.active=void 0===e?!this.active:e,this.active?this.addClass("vjs-active"):this.removeClass("vjs-active")},n.handleClick=function(){this.update()},n.selected=function(){},t}(SettingMenuItem);video_js.registerComponent("SettingOnOffItem",SettingOnOffItem);var SettingSubOptionTitle=function(e){function t(t,n){var i;return i=e.call(this,t,n)||this,i.addChild("Component",{},0),i.addClass("vjs-settings-sub-menu-item"),i.addClass("vjs-settings-sub-menu-title"),i}return _inheritsLoose(t,e),t.prototype.handleClick=function(){this.options_.menu.restore()},t}(SettingMenuItem);video_js.registerComponent("SettingSubOptionTitle",SettingSubOptionTitle);var SettingSubOptionItem=function(e){function t(t,n){var i;return i=e.call(this,t,n)||this,i.selectable=!0,Object.assign(_assertThisInitialized(_assertThisInitialized(i)),n),i.addChild("Component",{},0),i.addClass("vjs-settings-sub-menu-item"),i.addClass("vjs-settings-sub-menu-option"),i.update(),i}_inheritsLoose(t,e);var n=t.prototype;return n.update=function(){this.selected(this.value===this.parent.currentValue.value)},n.handleClick=function(){this.parent.update(this)},t}(SettingMenuItem);video_js.registerComponent("SettingSubOptionItem",SettingSubOptionItem);var SettingMenu$1=video_js.getComponent("SettingMenu"),SettingMenuTemp=function(e){function t(t){return e.call(this,t,{name:"SettingMenuTemp"})||this}return _inheritsLoose(t,e),t}(SettingMenu$1),getMenuDimension=function(e,t){var n=new SettingMenuTemp(e);n.update(t),e.addChild(n);var i=n.contentEl_.getBoundingClientRect();return n.update(),n.dispose(),e.removeChild(n),i},SettingOptionItem=function(e){function t(t,n){var i;return void 0===n&&(n={}),i=e.call(this,t,Object.assign(n,parseEntries(n.entries)))||this,i.setEntries(i.options_.entries),i.entries.length||i.hide(),i}_inheritsLoose(t,e);var n=t.prototype;return n.createEl=function(){var e=this.options_,t=e.icon,n=e.label,i=e.currentValue,o=video_js.dom.createEl("li",{className:"vjs-menu-item vjs-setting-menu-item",innerHTML:'\n        <div class="vjs-icon-placeholder '+(t||"")+'"></div>\n        <div class="vjs-setting-menu-label">'+this.localize(n)+'</div>\n        <div class="vjs-spacer"></div>\n      '});return this.currentValueEl=video_js.dom.createEl("div",{className:"vjs-setting-menu-value",innerHTML:this.localize(i?i.label:"")}),o.appendChild(this.currentValueEl),o},n.setEntries=function(e){var t=this,n=parseEntries(e),i=n.entries,o=n.currentValue;this.entries=i,this.currentValue=o,o&&(this.currentValueEl.innerHTML=this.localize(o.label)),this.subMenuItems=this.entries.map(function(e){var n=e.label,i=e.value;return new SettingSubOptionItem(t.player_,{label:n,value:i,parent:t,menu:t.menu})}),this.subMenuItems.splice(0,0,new SettingSubOptionTitle(this.player_,{label:this.options_.label,menu:this.menu}))},n.handleClick=function(){var e=getMenuDimension(this.player_,this.subMenuItems);this.menu.update(this.subMenuItems),this.menu.resize(e)},n.update=function(e){var t=e.label,n=e.value;this.currentValue={label:t,value:n},this.currentValueEl.innerHTML=this.localize(t),this.subMenuItems.forEach(function(e){e.update&&e.update()}),this.menu.restore()},n.show=function(){e.prototype.show.call(this),this.menu.reset()},t}(SettingMenuItem);video_js.registerComponent("SettingOptionItem",SettingOptionItem);var PlaybackRateSettingOptionalItem=function(e){function t(t,n){var i;return i=e.call(this,t,Object.assign(n,{label:"Speed",icon:"vjs-icon-slow-motion-video",entries:[.5,.75,{label:"Normal",value:1,defalut:!0},1.25,1.5,2]}))||this,i.addClass("vjs-setting-playback-rate"),t.on("ratechange",function(){var e=t.playbackRate(),n=i.entries.find(function(t){var n=t.value;return e===n});i.update(n)}),i}return _inheritsLoose(t,e),t.prototype.update=function(t){e.prototype.update.call(this,t),this.player_.playbackRate()!==t.value&&this.player_.playbackRate(t.value)},t}(SettingOptionItem);video_js.registerComponent("PlaybackRateSettingOptionalItem",PlaybackRateSettingOptionalItem);var MenuButton=video_js.getComponent("MenuButton"),SettingMenuButton=function(e){function t(t,n){var i;return i=e.call(this,t,n)||this,t.addChild(i.menu),i.removeChild(i.menu),t.on("playerresize",function(){i.menu.reset()}),i}_inheritsLoose(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-setting-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-setting-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createMenu=function(){var e=new SettingMenu(this.player_,{menuButton:this});return(this.options_.entries||[]).forEach(function(t){e.addChild(t,{menu:e})}),e},n.hideMenu=function(){this.unpressButton(),this.el_.blur()},n.unpressButton=function(){e.prototype.unpressButton.call(this),this.player_.removeClass("vjs-keep-control-showing"),this.menu.restore()},n.handleClick=function(){var e=this;this.player_.addClass("vjs-keep-control-showing"),this.buttonPressed_?this.unpressButton():this.pressButton(),this.off(document.body,"click",this.hideMenu),this.off(document.body,"touchend",this.hideMenu),setTimeout(function(){e.one(document.body,"click",e.hideMenu)},0)},t}(MenuButton);SettingMenuButton.prototype.controlText_="Settings",SettingMenuButton.prototype.options_={entries:["PlaybackRateSettingOptionalItem"]},video_js.registerComponent("SettingMenuButton",SettingMenuButton);
