!function(t){"use strict";function n(){return n=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])}return t},n.apply(this,arguments)}function i(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}var e=function(){function t(t,n){this.values=t.slice(0),this.index_=n||0,this.loop_=!0}var n=t.prototype;return n.index=function(t){if(void 0===t)return this.index_;this.index_=Math.max(0,Math.min(t,this.values.length-1))},n.loop=function(t){if(void 0===t)return this.loop_;this.loop_=!!t},n.calc=function(t){var n=this.index_+t,i=this.values.length;return this.loop_?(i+n)%i:Math.max(0,Math.min(n,i-1))},n.step=function(t){return this.index_=this.calc(t),this.values[this.index_]},n.current=function(){return this.values[this.index_]},n.next=function(){return this.step(1)},n.prev=function(){return this.step(-1)},n.ended=function(){return this.index_===this.values.length-1},t}(),o=t.getComponent("SettingOptionItem"),r=function(t){function n(n,i){var e;return e=t.call(this,n,Object.assign(i,{name:"QualitySettingItem",label:"Quality",icon:"vjs-icon-hd",entries:i.quality||[]}))||this,e.addClass("vjs-setting-quality"),n.on("quality",function(t,n){e.setEntries(n.map(function(t,n){t.value=n})),e.show()}),e}return i(n,t),n.prototype.update=function(n){t.prototype.update.call(this,n),this.player_.quality.pick(n.value)},n}(o);t.getComponent("SettingMenuButton").prototype.options_.entries.push("QualitySettingItem"),t.registerComponent("QualityItem",r);var u=function(t){function e(n,i,e){var o;return void 0===e&&(e=0),o=t.call(this,i,e)||this,o.player_=n,o.pick(e,!0),o}return i(e,t),e.prototype.pick=function(t,i){void 0!==t&&this.index(t);var e=this.player_,o=this.current(),r=e.ended()?0:e.currentTime();!i&&r&&e.one("loadedmetadata",function(){e.one("canplaythrough",function(){e.currentTime(r)}),e.play()}),e.src(o.sources),e.trigger("qualitychange",n({},o,{index:this.index()}))},e}(e),s=function(t,n){var i=this.player_;i.qualites=new u(i,t,n),i.trigger("quality",t)};t.registerPlugin("setQualities",s),t.hook("setup",function(t){var n=t.options_.qualites;if(n&&n.length){var i=n.findIndex(function(t){return t.default});t.setQuality(n,i)}})}(videojs);
