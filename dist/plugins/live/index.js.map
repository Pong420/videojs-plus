{"version":3,"file":"index.js","sources":["../../../source/Plugin/Live/LiveNotice.js","../../../source/Plugin/Live/Live.js"],"sourcesContent":["import videojs from 'video.js';\n\nconst Component = videojs.getComponent('Component');\n\nclass LiveNotice extends Component {\n  createEl() {\n    const el = videojs.dom.createEl('div', {\n      className: 'vjs-live-notice',\n      innerHTML: `\n        <div class=\"vjs-live-notice-spot vjs-icon-circle\"></div>\n        Live\n      `\n    });\n\n    return el;\n  }\n}\n\nvideojs.registerComponent('LiveNotice', LiveNotice);\n\nexport default LiveNotice;\n","import videojs from 'video.js';\nimport LiveNotice from './LiveNotice';\nimport './Live.scss';\n\nconst Plugin = videojs.getPlugin('plugin');\n\nclass Live extends Plugin {\n  constructor(player, options = {}) {\n    super(player, options);\n\n    this.createLiveNotive(player);\n\n    this.start(player);\n  }\n\n  createLiveNotive(player) {\n    const { parent, index } = player.findChild('DurationDisplay')[0];\n    const noticeEl = new LiveNotice(player);\n\n    parent.addChild(noticeEl, {}, index);\n\n    this.on('dispose', () => {\n      parent.removeChild(noticeEl);\n    });\n  }\n\n  start(player) {\n    const onTimeupdate = this.onTimeUpdate.bind(this);\n\n    player.addClass('vjs-live-streaming');\n    player.on('timeupdate', onTimeupdate);\n\n    this.on('dispose', () => {\n      player.off('timeupdate', onTimeupdate);\n      player.removeClass('vjs-live-streaming');\n      player.removeClass('vjs-live');\n    });\n  }\n\n  onTimeUpdate() {\n    const player = this.player;\n    const duration = player.duration();\n\n    if (duration === Infinity || player.currentTime() >= duration) {\n      player.addClass('vjs-live');\n    } else {\n      player.removeClass('vjs-live');\n    }\n  }\n}\n\nvideojs.registerPlugin('live', Live);\n"],"names":["Component","videojs","getComponent","LiveNotice","createEl","el","dom","className","innerHTML","registerComponent","Plugin","getPlugin","Live","player","options","createLiveNotive","start","findChild","parent","index","noticeEl","addChild","on","removeChild","onTimeupdate","onTimeUpdate","bind","addClass","off","removeClass","duration","Infinity","currentTime","registerPlugin"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;EAEA,IAAMA,SAAS,GAAGC,2BAAO,CAACC,YAAR,CAAqB,WAArB,CAAlB;;MAEMC;;;;;;;;;WACJC,WAAA,oBAAW;EACT,QAAMC,EAAE,GAAGJ,2BAAO,CAACK,GAAR,CAAYF,QAAZ,CAAqB,KAArB,EAA4B;EACrCG,MAAAA,SAAS,EAAE,iBAD0B;EAErCC,MAAAA,SAAS;EAF4B,KAA5B,CAAX;EAQA,WAAOH,EAAP;EACD;;;IAXsBL;;AAczBC,6BAAO,CAACQ,iBAAR,CAA0B,YAA1B,EAAwCN,UAAxC;;ECdA,IAAMO,MAAM,GAAGT,2BAAO,CAACU,SAAR,CAAkB,QAAlB,CAAf;;MAEMC;;;EACJ,gBAAYC,MAAZ,EAAoBC,OAApB,EAAkC;EAAA;;EAAA,QAAdA,OAAc;EAAdA,MAAAA,OAAc,GAAJ,EAAI;EAAA;;EAChC,+BAAMD,MAAN,EAAcC,OAAd;;EAEA,UAAKC,gBAAL,CAAsBF,MAAtB;;EAEA,UAAKG,KAAL,CAAWH,MAAX;;EALgC;EAMjC;;;;WAEDE,mBAAA,0BAAiBF,MAAjB,EAAyB;EAAA,6BACGA,MAAM,CAACI,SAAP,CAAiB,iBAAjB,EAAoC,CAApC,CADH;EAAA,QACfC,MADe,sBACfA,MADe;EAAA,QACPC,KADO,sBACPA,KADO;EAEvB,QAAMC,QAAQ,GAAG,IAAIjB,UAAJ,CAAeU,MAAf,CAAjB;EAEAK,IAAAA,MAAM,CAACG,QAAP,CAAgBD,QAAhB,EAA0B,EAA1B,EAA8BD,KAA9B;EAEA,SAAKG,EAAL,CAAQ,SAAR,EAAmB,YAAM;EACvBJ,MAAAA,MAAM,CAACK,WAAP,CAAmBH,QAAnB;EACD,KAFD;EAGD;;WAEDJ,QAAA,eAAMH,MAAN,EAAc;EACZ,QAAMW,YAAY,GAAG,KAAKC,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAArB;EAEAb,IAAAA,MAAM,CAACc,QAAP,CAAgB,oBAAhB;EACAd,IAAAA,MAAM,CAACS,EAAP,CAAU,YAAV,EAAwBE,YAAxB;EAEA,SAAKF,EAAL,CAAQ,SAAR,EAAmB,YAAM;EACvBT,MAAAA,MAAM,CAACe,GAAP,CAAW,YAAX,EAAyBJ,YAAzB;EACAX,MAAAA,MAAM,CAACgB,WAAP,CAAmB,oBAAnB;EACAhB,MAAAA,MAAM,CAACgB,WAAP,CAAmB,UAAnB;EACD,KAJD;EAKD;;WAEDJ,eAAA,wBAAe;EACb,QAAMZ,MAAM,GAAG,KAAKA,MAApB;EACA,QAAMiB,QAAQ,GAAGjB,MAAM,CAACiB,QAAP,EAAjB;;EAEA,QAAIA,QAAQ,KAAKC,QAAb,IAAyBlB,MAAM,CAACmB,WAAP,MAAwBF,QAArD,EAA+D;EAC7DjB,MAAAA,MAAM,CAACc,QAAP,CAAgB,UAAhB;EACD,KAFD,MAEO;EACLd,MAAAA,MAAM,CAACgB,WAAP,CAAmB,UAAnB;EACD;EACF;;;IA1CgBnB;;AA6CnBT,6BAAO,CAACgC,cAAR,CAAuB,MAAvB,EAA+BrB,IAA/B;;;;;;"}