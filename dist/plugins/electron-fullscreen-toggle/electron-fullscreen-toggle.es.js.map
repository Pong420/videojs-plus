{"version":3,"file":"electron-fullscreen-toggle.es.js","sources":["../../../source/Utils/Log.js","../../../source/Plugin/ElectronFullscreenToggle/ElectronFullscreenToggle.js"],"sourcesContent":["import videojs from 'video.js';\n\nlet logType = '';\n\ntry {\n  logType = localStorage && localStorage.getItem('vjs-plus-log');\n} catch (e) {}\n\nconst log = (function () {\n  if (logType === 'normal' || videojs.browser.IE_VERSION) {\n    // log without style\n    return console.info.bind(console, '[VJS Plus]:');\n  } else if (logType) {\n    // log with style\n    return console.info.bind(\n      console,\n      '%c[VJS Plus]:',\n      'font-weight: bold; color:#2196F3;'\n    );\n  }\n\n  return function () {};\n})();\n\nexport default log;\n","import videojs from 'video.js';\nimport log from '../../Utils/Log';\n\nlet getCurrentWindow;\ntry {\n  getCurrentWindow = require('electron').remote.getCurrentWindow();\n} catch (error) {\n  getCurrentWindow = window.getCurrentWindow;\n}\n\nclass ElectronFullscreenToggle extends videojs.getComponent(\n  'FullscreenToggle'\n) {\n  constructor(player, options) {\n    super(player, options);\n\n    const currentWindow = window.getCurrentWindow();\n    const setFullscreen = flag => {\n      currentWindow.setFullScreen(flag);\n      return player;\n    };\n\n    const triggerFullscreenChange = () => {\n      player.trigger('fullscreenchange');\n    };\n\n    player.requestFullscreen = setFullscreen.bind(player, true);\n    player.exitFullscreen = setFullscreen.bind(player, false);\n    player.isFullscreen = () => currentWindow.isFullScreen();\n\n    currentWindow.addListener('enter-full-screen', triggerFullscreenChange);\n    currentWindow.addListener('leave-full-screen', triggerFullscreenChange);\n\n    player.on('dispose', () => {\n      currentWindow.removeListener(\n        'enter-full-screen',\n        triggerFullscreenChange\n      );\n      currentWindow.removeListener(\n        'leave-full-screen',\n        triggerFullscreenChange\n      );\n    });\n\n    if (player.isFullscreen()) {\n      // @ts-ignore\n      this.handleFullscreenChange();\n      player.addClass('vjs-fullscreen');\n    }\n  }\n\n  handleClick() {\n    if (this.player_.isFullscreen()) {\n      this.player_.exitFullscreen();\n    } else {\n      this.player_.requestFullscreen();\n    }\n  }\n}\n\nif (getCurrentWindow) {\n  videojs.registerComponent(\n    'ElectronFullscreenToggle',\n    ElectronFullscreenToggle\n  );\n\n  const controlBarChildren = videojs.getComponent('ControlBar').prototype\n    .options_.children;\n\n  const fullScreenButtonIndex = controlBarChildren.indexOf('fullscreenToggle');\n\n  controlBarChildren[fullScreenButtonIndex] = 'ElectronFullscreenToggle';\n} else {\n  log(\n    'Plugin \"ElectronFullscreenToggle\" is not enabled, please check the docs for more information'\n  );\n}\n"],"names":["logType","localStorage","getItem","e","log","videojs","browser","IE_VERSION","console","info","bind","getCurrentWindow","require","remote","error","window","ElectronFullscreenToggle","player","options","currentWindow","setFullscreen","flag","setFullScreen","triggerFullscreenChange","trigger","requestFullscreen","exitFullscreen","isFullscreen","isFullScreen","addListener","on","removeListener","handleFullscreenChange","addClass","handleClick","player_","getComponent","registerComponent","controlBarChildren","prototype","options_","children","fullScreenButtonIndex","indexOf"],"mappings":"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"}