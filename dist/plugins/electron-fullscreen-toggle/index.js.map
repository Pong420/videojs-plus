{"version":3,"file":"index.js","sources":["../../../source/Utils/Log.js","../../../source/Plugin/ElectronFullscreenToggle/ElectronFullscreenToggle.js"],"sourcesContent":["import videojs from 'video.js';\n\nlet logType = '';\n\ntry {\n  logType = localStorage && localStorage.getItem('vjs-plus-log');\n} catch (e) {}\n\nconst log = (function () {\n  if (logType === 'normal' || videojs.browser.IE_VERSION) {\n    // log without style\n    return console.info.bind(console, '[VJS Plus]:');\n  } else if (logType) {\n    // log with style\n    return console.info.bind(\n      console,\n      '%c[VJS Plus]:',\n      'font-weight: bold; color:#2196F3;'\n    );\n  }\n\n  return function () {};\n})();\n\nexport default log;\n","import videojs from 'video.js';\nimport log from '../../Utils/Log';\n\nlet getCurrentWindow;\ntry {\n  getCurrentWindow = require('electron').remote.getCurrentWindow();\n} catch (error) {\n  getCurrentWindow = window.getCurrentWindow;\n}\n\nclass ElectronFullscreenToggle extends videojs.getComponent(\n  'FullscreenToggle'\n) {\n  constructor(player, options) {\n    super(player, options);\n\n    const currentWindow = window.getCurrentWindow();\n    const setFullscreen = flag => {\n      currentWindow.setFullScreen(flag);\n      return player;\n    };\n\n    const triggerFullscreenChange = () => {\n      player.trigger('fullscreenchange');\n    };\n\n    player.requestFullscreen = setFullscreen.bind(player, true);\n    player.exitFullscreen = setFullscreen.bind(player, false);\n    player.isFullscreen = () => currentWindow.isFullScreen();\n\n    currentWindow.addListener('enter-full-screen', triggerFullscreenChange);\n    currentWindow.addListener('leave-full-screen', triggerFullscreenChange);\n\n    player.on('dispose', () => {\n      currentWindow.removeListener(\n        'enter-full-screen',\n        triggerFullscreenChange\n      );\n      currentWindow.removeListener(\n        'leave-full-screen',\n        triggerFullscreenChange\n      );\n    });\n\n    if (player.isFullscreen()) {\n      // @ts-ignore\n      this.handleFullscreenChange();\n      player.addClass('vjs-fullscreen');\n    }\n  }\n\n  handleClick() {\n    if (this.player_.isFullscreen()) {\n      this.player_.exitFullscreen();\n    } else {\n      this.player_.requestFullscreen();\n    }\n  }\n}\n\nif (getCurrentWindow) {\n  videojs.registerComponent(\n    'ElectronFullscreenToggle',\n    ElectronFullscreenToggle\n  );\n\n  const controlBarChildren = videojs.getComponent('ControlBar').prototype\n    .options_.children;\n\n  const fullScreenButtonIndex = controlBarChildren.indexOf('fullscreenToggle');\n\n  controlBarChildren[fullScreenButtonIndex] = 'ElectronFullscreenToggle';\n} else {\n  log(\n    'Plugin \"ElectronFullscreenToggle\" is not enabled, please check the docs for more information'\n  );\n}\n"],"names":["logType","localStorage","getItem","e","log","videojs","browser","IE_VERSION","console","info","bind","getCurrentWindow","require","remote","error","window","ElectronFullscreenToggle","player","options","currentWindow","setFullscreen","flag","setFullScreen","triggerFullscreenChange","trigger","requestFullscreen","exitFullscreen","isFullscreen","isFullScreen","addListener","on","removeListener","handleFullscreenChange","addClass","handleClick","player_","getComponent","registerComponent","controlBarChildren","prototype","options_","children","fullScreenButtonIndex","indexOf"],"mappings":"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"}